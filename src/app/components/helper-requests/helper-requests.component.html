<div class="dashboard-container">
  <!-- Sidebar -->
  <aside class="sidebar" [class.collapsed]="isSidebarCollapsed">
    <div class="sidebar-header">
      <h2>Community Help</h2>
      <button class="toggle-btn" (click)="toggleSidebar()" type="button">â˜°</button>
    </div>
    
    <nav class="sidebar-nav">
      <a routerLink="/helper/requests" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item">
        <span class="nav-icon">ğŸ“Š</span>
        <span class="nav-text">Dashboard</span>
      </a>
      <a routerLink="/helper/requests" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item">
        <span class="nav-icon">ğŸ“‹</span>
        <span class="nav-text">Available Requests</span>
      </a>
      <a routerLink="/helper/tasks" routerLinkActive="active" class="nav-item">
        <span class="nav-icon">âœ…</span>
        <span class="nav-text">My Tasks</span>
      </a>
      <a routerLink="/profile" routerLinkActive="active" class="nav-item">
        <span class="nav-icon">ğŸ‘¤</span>
        <span class="nav-text">Profile</span>
      </a>
      <a (click)="logout()" class="nav-item logout">
        <span class="nav-icon">ğŸšª</span>
        <span class="nav-text">Logout</span>
      </a>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <header class="dashboard-header">
      <div class="header-content">
        <div>
          <h1>Helper Dashboard</h1>
          <p>Manage tasks and help your community</p>
        </div>
        <div class="status-indicator">
          <span class="status-dot"></span>
          <span class="status-text">Available</span>
        </div>
      </div>
    </header>

    <!-- Summary Cards -->
    <section class="summary-cards">
      <div class="summary-card available">
        <div class="card-icon">ğŸ“‹</div>
        <div class="card-content">
          <h3>Available Requests</h3>
          <p class="card-number">{{ availableCount }}</p>
        </div>
      </div>
      
      <div class="summary-card accepted">
        <div class="card-icon">âœ…</div>
        <div class="card-content">
          <h3>Accepted Tasks</h3>
          <p class="card-number">{{ acceptedCount }}</p>
        </div>
      </div>
      
      <div class="summary-card progress">
        <div class="card-icon">ğŸ”„</div>
        <div class="card-content">
          <h3>In-Progress</h3>
          <p class="card-number">{{ inProgressCount }}</p>
        </div>
      </div>
      
      <div class="summary-card completed">
        <div class="card-icon">ğŸ‰</div>
        <div class="card-content">
          <h3>Completed</h3>
          <p class="card-number">{{ completedCount }}</p>
        </div>
      </div>
    </section>

    <!-- Available Requests Section -->
    <section class="requests-section">
      <h2>Available Help Requests</h2>
      
      <div class="loading" *ngIf="isLoading">
        <p>Loading available requests...</p>
      </div>

      <div class="error-message" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>

      <div class="no-requests" *ngIf="!isLoading && availableRequests.length === 0">
        <p>No available requests at the moment.</p>
        <p class="sub-text">Check back later for new requests from your community.</p>
      </div>

      <div class="requests-grid" *ngIf="!isLoading && availableRequests.length > 0">
        <div class="request-card" *ngFor="let request of availableRequests">
          <div class="request-header">
            <h3>{{ request.title }}</h3>
            <span class="status-badge status-pending">Pending</span>
          </div>
          
          <div class="request-body">
            <p class="request-description">{{ request.description }}</p>
            
            <div class="request-meta">
              <div class="meta-item">
                <span class="meta-icon">ğŸ“</span>
                <span class="meta-text">{{ request.category }}</span>
              </div>
              <div class="meta-item">
                <span class="meta-icon">ğŸ“</span>
                <span class="meta-text">{{ request.resident_location || 'Location not specified' }}</span>
              </div>
              <div class="meta-item">
                <span class="meta-icon">ğŸ“…</span>
                <span class="meta-text">{{ request.created_at | date:'short' }}</span>
              </div>
              <div class="meta-item">
                <span class="meta-icon">ğŸ‘¤</span>
                <span class="meta-text">{{ request.resident_name }}</span>
              </div>
            </div>
          </div>
          
          <div class="request-footer">
            <button class="accept-btn" (click)="acceptRequest(request.id)" [disabled]="processingId === request.id" type="button">
              {{ processingId === request.id ? 'Accepting...' : 'Accept' }}
            </button>
            <button class="decline-btn" (click)="declineRequest(request.id)" type="button">
              Decline
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Success Message -->
    <div class="success-toast" *ngIf="successMessage" [@slideIn]>
      {{ successMessage }}
    </div>
  </main>
</div>
